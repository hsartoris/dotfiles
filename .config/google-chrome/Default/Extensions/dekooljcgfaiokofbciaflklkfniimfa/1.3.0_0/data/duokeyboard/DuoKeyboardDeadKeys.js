var DuoKeyboardDeadKeys = (function () {
    'use strict';
    var deadkeyMode = false,
        self = {},//not all dead keys are supported yet
        DKT = {"47":{"65":{"code":570},"66":{"code":579},"67":{"code":571},"68":{"code":272},"69":{"code":582},"71":{"code":484},"72":{"code":294},"73":{"code":407},"74":{"code":584},"75":{"code":42816},"76":{"code":321},"79":{"code":216},"80":{"code":11363},"82":{"code":588},"84":{"code":358},"89":{"code":590},"90":{"code":437},"97":{"code":11365},"98":{"code":384},"99":{"code":572},"100":{"code":273},"101":{"code":583},"103":{"code":485},"104":{"code":295},"105":{"code":616},"106":{"code":585},"107":{"code":42817},"108":{"code":322},"111":{"code":248},"112":{"code":7549},"114":{"code":589},"116":{"code":359},"121":{"code":591},"122":{"code":438},"222":{"code":42852},"254":{"code":42853},"567":{"code":607},"617":{"code":7548},"650":{"code":7551},"660":{"code":673},"662":{"code":446},"671":{"code":7436},"7441":{"code":7443}},"183":{"76":{"code":319},"108":{"code":320}},"702":{"97":{"code":7834}},"768":{"32":{"code":96},"65":{"code":192},"69":{"code":200},"73":{"code":204},"78":{"code":504},"79":{"code":210},"85":{"code":217},"87":{"code":7808},"89":{"code":7922},"97":{"code":224},"101":{"code":232},"105":{"code":236},"110":{"code":505},"111":{"code":242},"117":{"code":249},"119":{"code":7809},"121":{"code":7923},"768":{"code":96},"770":{"65":{"code":7846},"69":{"code":7872},"79":{"code":7890},"97":{"code":7847},"101":{"code":7873},"111":{"code":7891}},"772":{"69":{"code":7700},"79":{"code":7760},"101":{"code":7701},"111":{"code":7761}},"774":{"65":{"code":7856},"97":{"code":7857}},"776":{"85":{"code":475},"117":{"code":476}},"795":{"79":{"code":7900},"85":{"code":7914},"111":{"code":7901},"117":{"code":7915}},"913":{"code":8122},"917":{"code":8136},"921":{"code":8154},"927":{"code":8184},"933":{"code":8170},"937":{"code":8186},"945":{"code":8048},"949":{"code":8050},"951":{"code":8052},"953":{"code":8054},"959":{"code":8056},"965":{"code":8058},"969":{"code":8060}},"769":{"32":{"code":39},"65":{"code":193},"67":{"code":262},"69":{"code":201},"71":{"code":500},"73":{"code":205},"75":{"code":7728},"76":{"code":313},"77":{"code":7742},"78":{"code":323},"79":{"code":211},"80":{"code":7764},"82":{"code":340},"83":{"code":346},"85":{"code":218},"87":{"code":7810},"89":{"code":221},"90":{"code":377},"97":{"code":225},"99":{"code":263},"101":{"code":233},"103":{"code":501},"105":{"code":237},"107":{"code":7729},"108":{"code":314},"109":{"code":7743},"110":{"code":324},"111":{"code":243},"112":{"code":7765},"114":{"code":341},"115":{"code":347},"117":{"code":250},"119":{"code":7811},"121":{"code":253},"122":{"code":378},"198":{"code":508},"230":{"code":509},"769":{"code":180},"770":{"65":{"code":7844},"69":{"code":7870},"79":{"code":7888},"97":{"code":7845},"101":{"code":7871},"111":{"code":7889}},"771":{"79":{"code":7756},"85":{"code":7800},"111":{"code":7757},"117":{"code":7801}},"772":{"69":{"code":7702},"79":{"code":7762},"101":{"code":7703},"111":{"code":7763}},"774":{"65":{"code":7854},"97":{"code":7855}},"775":{"83":{"code":7780},"115":{"code":7781}},"776":{"73":{"code":7726},"85":{"code":471},"105":{"code":7727},"117":{"code":472},"921":{"code":938},"933":{"code":939},"953":{"code":912},"965":{"code":944}},"778":{"65":{"code":506},"97":{"code":507}},"795":{"79":{"code":7898},"85":{"code":7912},"111":{"code":7899},"117":{"code":7913}},"807":{"67":{"code":7688},"99":{"code":7689}},"913":{"code":902},"917":{"code":904},"921":{"code":906},"925":{"code":905},"927":{"code":908},"933":{"code":910},"937":{"code":911},"945":{"code":940},"949":{"code":941},"951":{"code":942},"953":{"code":943},"959":{"code":972},"965":{"code":973},"969":{"code":974}},"770":{"32":{"code":94},"65":{"code":194},"67":{"code":264},"69":{"code":202},"71":{"code":284},"72":{"code":292},"73":{"code":206},"74":{"code":308},"79":{"code":212},"83":{"code":348},"85":{"code":219},"87":{"code":372},"89":{"code":374},"90":{"code":7824},"97":{"code":226},"99":{"code":265},"101":{"code":234},"103":{"code":285},"104":{"code":293},"105":{"code":238},"106":{"code":309},"111":{"code":244},"115":{"code":349},"117":{"code":251},"119":{"code":373},"121":{"code":375},"122":{"code":7825},"768":{"65":{"code":7846},"69":{"code":7872},"79":{"code":7890},"97":{"code":7847},"101":{"code":7873},"111":{"code":7891}},"769":{"65":{"code":7844},"69":{"code":7870},"79":{"code":7888},"97":{"code":7845},"101":{"code":7871},"111":{"code":7889}},"770":{"code":94},"771":{"65":{"code":7850},"69":{"code":7876},"79":{"code":7894},"97":{"code":7851},"101":{"code":7877},"111":{"code":7895}},"777":{"65":{"code":7848},"69":{"code":7874},"79":{"code":7892},"97":{"code":7849},"101":{"code":7875},"111":{"code":7893}},"803":{"65":{"code":7852},"69":{"code":7878},"79":{"code":7896},"97":{"code":7853},"101":{"code":7879},"111":{"code":7897}}},"771":{"32":{"code":126},"65":{"code":195},"69":{"code":7868},"73":{"code":296},"78":{"code":209},"79":{"code":213},"85":{"code":360},"86":{"code":7804},"89":{"code":7928},"97":{"code":227},"101":{"code":7869},"105":{"code":297},"110":{"code":241},"111":{"code":245},"117":{"code":361},"118":{"code":7805},"121":{"code":7929},"769":{"79":{"code":7756},"85":{"code":7800},"111":{"code":7757},"117":{"code":7801}},"770":{"65":{"code":7850},"69":{"code":7876},"79":{"code":7894},"97":{"code":7851},"101":{"code":7877},"111":{"code":7895}},"771":{"code":126},"772":{"79":{"code":556},"111":{"code":557}},"774":{"65":{"code":7860},"97":{"code":7861}},"776":{"79":{"code":7758},"111":{"code":7759}},"795":{"79":{"code":7904},"85":{"code":7918},"111":{"code":7905},"117":{"code":7919}},"945":{"code":8118},"951":{"code":8134},"953":{"code":8150},"965":{"code":8166},"969":{"code":8182}},"772":{"32":{"code":175},"65":{"code":256},"69":{"code":274},"71":{"code":7712},"73":{"code":298},"79":{"code":332},"85":{"code":362},"89":{"code":562},"97":{"code":257},"101":{"code":275},"103":{"code":7713},"105":{"code":299},"111":{"code":333},"117":{"code":363},"121":{"code":563},"198":{"code":482},"230":{"code":483},"768":{"69":{"code":7700},"79":{"code":7760},"101":{"code":7701},"111":{"code":7761}},"769":{"69":{"code":7702},"79":{"code":7762},"101":{"code":7703},"111":{"code":7763}},"771":{"79":{"code":556},"111":{"code":557}},"772":{"code":175},"775":{"65":{"code":480},"79":{"code":560},"97":{"code":481},"111":{"code":561}},"776":{"65":{"code":478},"79":{"code":554},"85":{"code":7802},"97":{"code":479},"111":{"code":555},"117":{"code":7803}},"803":{"76":{"code":7736},"82":{"code":7772},"108":{"code":7737},"114":{"code":7773}},"808":{"79":{"code":492},"111":{"code":493}},"913":{"code":8121},"921":{"code":8153},"933":{"code":8169},"945":{"code":8113},"953":{"code":8145},"965":{"code":8161}},"774":{"32":{"code":728},"65":{"code":258},"69":{"code":276},"71":{"code":286},"73":{"code":300},"79":{"code":334},"85":{"code":364},"97":{"code":259},"101":{"code":277},"103":{"code":287},"105":{"code":301},"111":{"code":335},"117":{"code":365},"768":{"65":{"code":7856},"97":{"code":7857}},"769":{"65":{"code":7854},"97":{"code":7855}},"771":{"65":{"code":7860},"97":{"code":7861}},"774":{"code":728},"777":{"65":{"code":7858},"97":{"code":7859}},"803":{"65":{"code":7862},"97":{"code":7863}},"807":{"69":{"code":7708},"101":{"code":7709}},"913":{"code":8120},"921":{"code":8152},"933":{"code":8168},"945":{"code":8112},"953":{"code":8144},"965":{"code":8160}},"775":{"32":{"code":729},"65":{"code":550},"66":{"code":7682},"67":{"code":266},"68":{"code":7690},"69":{"code":278},"70":{"code":7710},"71":{"code":288},"72":{"code":7714},"73":{"code":304},"77":{"code":7744},"78":{"code":7748},"79":{"code":558},"80":{"code":7766},"82":{"code":7768},"83":{"code":7776},"84":{"code":7786},"87":{"code":7814},"88":{"code":7818},"89":{"code":7822},"90":{"code":379},"97":{"code":551},"98":{"code":7683},"99":{"code":267},"100":{"code":7691},"101":{"code":279},"102":{"code":7711},"103":{"code":289},"104":{"code":7715},"109":{"code":7745},"110":{"code":7749},"111":{"code":559},"112":{"code":7767},"114":{"code":7769},"115":{"code":7777},"116":{"code":7787},"119":{"code":7815},"120":{"code":7819},"121":{"code":7823},"122":{"code":380},"769":{"83":{"code":7780},"115":{"code":7781}},"772":{"65":{"code":480},"79":{"code":560},"97":{"code":481},"111":{"code":561}},"775":{"code":729},"780":{"83":{"code":7782},"115":{"code":7783}},"803":{"83":{"code":7784},"115":{"code":7785}}},"776":{"32":{"code":34},"65":{"code":196},"69":{"code":203},"72":{"code":7718},"73":{"code":207},"79":{"code":214},"85":{"code":220},"87":{"code":7812},"88":{"code":7820},"89":{"code":376},"97":{"code":228},"101":{"code":235},"104":{"code":7719},"105":{"code":239},"111":{"code":246},"116":{"code":7831},"117":{"code":252},"119":{"code":7813},"120":{"code":7821},"121":{"code":255},"768":{"85":{"code":475},"117":{"code":476}},"769":{"73":{"code":7726},"85":{"code":471},"105":{"code":7727},"117":{"code":472},"921":{"code":938},"933":{"code":939},"953":{"code":912},"965":{"code":944}},"771":{"79":{"code":7758},"111":{"code":7759}},"772":{"65":{"code":478},"79":{"code":554},"85":{"code":469},"97":{"code":479},"111":{"code":555},"117":{"code":470}},"776":{"code":168},"780":{"85":{"code":473},"117":{"code":474}},"921":{"code":938},"933":{"code":939},"953":{"code":970},"965":{"code":971}},"777":{"32":{"code":777},"65":{"code":7842},"69":{"code":7866},"73":{"code":7880},"79":{"code":7886},"85":{"code":7910},"89":{"code":7926},"97":{"code":7843},"101":{"code":7867},"105":{"code":7881},"111":{"code":7887},"117":{"code":7911},"121":{"code":7927},"770":{"65":{"code":7848},"69":{"code":7874},"79":{"code":7892},"97":{"code":7849},"101":{"code":7875},"111":{"code":7893}},"774":{"65":{"code":7858},"97":{"code":7859}},"777":{"code":777},"795":{"79":{"code":7902},"85":{"code":7916},"111":{"code":7903},"117":{"code":7917}}},"778":{"32":{"code":176},"65":{"code":197},"85":{"code":366},"97":{"code":229},"117":{"code":367},"119":{"code":7832},"121":{"code":7833},"769":{"65":{"code":506},"97":{"code":507}},"778":{"code":176}},"779":{"32":{"code":733},"79":{"code":336},"85":{"code":368},"111":{"code":337},"117":{"code":369},"779":{"code":733}},"780":{"32":{"code":711},"65":{"code":461},"67":{"code":268},"68":{"code":270},"69":{"code":282},"71":{"code":486},"72":{"code":542},"73":{"code":463},"75":{"code":488},"76":{"code":317},"78":{"code":327},"79":{"code":465},"82":{"code":344},"83":{"code":352},"84":{"code":356},"85":{"code":467},"90":{"code":381},"97":{"code":462},"99":{"code":269},"100":{"code":271},"101":{"code":283},"103":{"code":487},"104":{"code":543},"105":{"code":464},"106":{"code":496},"107":{"code":489},"108":{"code":318},"110":{"code":328},"111":{"code":466},"114":{"code":345},"115":{"code":353},"116":{"code":357},"117":{"code":468},"122":{"code":382},"439":{"code":494},"658":{"code":495},"775":{"83":{"code":7782},"115":{"code":7783}},"776":{"85":{"code":473},"117":{"code":474}},"780":{"code":711}},"783":{"65":{"code":512},"69":{"code":516},"73":{"code":520},"79":{"code":524},"82":{"code":528},"85":{"code":532},"97":{"code":513},"101":{"code":517},"105":{"code":521},"111":{"code":525},"114":{"code":529},"117":{"code":533}},"785":{"65":{"code":514},"69":{"code":518},"73":{"code":522},"79":{"code":526},"82":{"code":530},"85":{"code":534},"97":{"code":515},"101":{"code":519},"105":{"code":523},"111":{"code":527},"114":{"code":531},"117":{"code":535}},"787":{"913":{"code":7944},"917":{"code":7960},"921":{"code":7992},"927":{"code":8008},"937":{"code":8040},"945":{"code":7936},"949":{"code":7952},"951":{"code":7968},"953":{"code":7984},"959":{"code":8000},"961":{"code":8164},"965":{"code":8016},"969":{"code":8032}},"788":{"913":{"code":7945},"917":{"code":7961},"921":{"code":7993},"927":{"code":8009},"929":{"code":8172},"933":{"code":8025},"937":{"code":8041},"945":{"code":7937},"949":{"code":7953},"951":{"code":7969},"953":{"code":7985},"959":{"code":8001},"961":{"code":8165},"965":{"code":8017},"969":{"code":8033}},"795":{"32":{"code":795},"79":{"code":416},"85":{"code":431},"111":{"code":417},"117":{"code":432},"768":{"79":{"code":7900},"85":{"code":7914},"111":{"code":7901},"117":{"code":7915}},"769":{"79":{"code":7898},"85":{"code":7912},"111":{"code":7899},"117":{"code":7913}},"771":{"79":{"code":7904},"85":{"code":7918},"111":{"code":7905},"117":{"code":7919}},"777":{"79":{"code":7902},"85":{"code":7916},"111":{"code":7903},"117":{"code":7917}},"795":{"code":795},"803":{"79":{"code":7906},"85":{"code":7920},"111":{"code":7907},"117":{"code":7921}}},"803":{"32":{"code":803},"65":{"code":7840},"66":{"code":7684},"68":{"code":7692},"69":{"code":7864},"72":{"code":7716},"73":{"code":7882},"75":{"code":7730},"76":{"code":7734},"77":{"code":7746},"78":{"code":7750},"79":{"code":7884},"82":{"code":7770},"83":{"code":7778},"84":{"code":7788},"85":{"code":7908},"86":{"code":7806},"87":{"code":7816},"89":{"code":7924},"90":{"code":7826},"97":{"code":7841},"98":{"code":7685},"100":{"code":7693},"101":{"code":7865},"104":{"code":7717},"105":{"code":7883},"107":{"code":7731},"108":{"code":7735},"109":{"code":7747},"110":{"code":7751},"111":{"code":7885},"114":{"code":7771},"115":{"code":7779},"116":{"code":7789},"117":{"code":7909},"118":{"code":7807},"119":{"code":7817},"121":{"code":7925},"122":{"code":7827},"770":{"65":{"code":7852},"69":{"code":7878},"79":{"code":7896},"97":{"code":7853},"101":{"code":7879},"111":{"code":7897}},"772":{"76":{"code":7736},"82":{"code":7772},"108":{"code":7737},"114":{"code":7773}},"774":{"65":{"code":7862},"97":{"code":7863}},"775":{"83":{"code":7784},"115":{"code":7785}},"795":{"79":{"code":7906},"85":{"code":7920},"111":{"code":7907},"117":{"code":7921}},"803":{"code":803}},"804":{"85":{"code":7794},"117":{"code":7795}},"805":{"65":{"code":7680},"97":{"code":7681}},"806":{"83":{"code":536},"84":{"code":538},"115":{"code":537},"116":{"code":539}},"807":{"32":{"code":184},"67":{"code":199},"68":{"code":7696},"69":{"code":552},"71":{"code":290},"72":{"code":7720},"75":{"code":310},"76":{"code":315},"78":{"code":325},"82":{"code":342},"83":{"code":350},"84":{"code":354},"99":{"code":231},"100":{"code":7697},"101":{"code":553},"103":{"code":291},"104":{"code":7721},"107":{"code":311},"108":{"code":316},"110":{"code":326},"114":{"code":343},"115":{"code":351},"116":{"code":355},"769":{"67":{"code":7688},"99":{"code":7689}},"774":{"69":{"code":7708},"101":{"code":7709}},"807":{"code":184}},"808":{"32":{"code":731},"65":{"code":260},"69":{"code":280},"73":{"code":302},"79":{"code":490},"85":{"code":370},"97":{"code":261},"101":{"code":281},"105":{"code":303},"111":{"code":491},"117":{"code":371},"772":{"79":{"code":492},"111":{"code":493}},"808":{"code":731}},"813":{"68":{"code":7698},"69":{"code":7704},"76":{"code":7740},"78":{"code":7754},"84":{"code":7792},"85":{"code":7798},"100":{"code":7699},"101":{"code":7705},"108":{"code":7741},"110":{"code":7755},"116":{"code":7793},"117":{"code":7799}},"814":{"72":{"code":7722},"104":{"code":7723}},"816":{"69":{"code":7706},"73":{"code":7724},"85":{"code":7796},"101":{"code":7707},"105":{"code":7725},"117":{"code":7797}},"817":{"66":{"code":7686},"68":{"code":7694},"75":{"code":7732},"76":{"code":7738},"78":{"code":7752},"82":{"code":7774},"84":{"code":7790},"90":{"code":7828},"98":{"code":7687},"100":{"code":7695},"104":{"code":7830},"107":{"code":7733},"108":{"code":7739},"110":{"code":7753},"114":{"code":7775},"116":{"code":7791},"122":{"code":7829}},"837":{"913":{"code":8124},"937":{"code":8188},"945":{"code":8115},"951":{"code":8131},"969":{"code":8179}}},
        DKT2Combine = {'96': 768, '180': 769, '94': 770, '126': 771, '175': 772, '728': 774, '729': 775, '168': 776, '777': 777, '176': 778, '733': 779, '711': 780, '-1': 783, '-1': 785, '795': 795, '803': 803, '-1': 804, '-1': 805, '-1': 806, '184': 807, '731': 808, '-1': 813, '-1': 814, '-1': 816, '-1': 817,'47':47,'787':787,'788':788,'890':890},
        chain = [],
        make = function () {
            var new_char = -1, A = DKT, i, n;
            if (chain.length > 1) {
                for (i = 0, n = chain.length; i < n; ++i) {
                    if ('undefined' !== typeof A[chain[i]]) {
                        A = A[chain[i]];
                    } else {
                        self.clear();
                    }
                }
            }
            if ('undefined' !== typeof A.code) {
                new_char = A.code;
                self.clear();
            }
            return new_char;
        };
    self = {
        "getDeadKeyMode" : function () {
            return deadkeyMode;
        },
        "addDeadKey" : function (code) {
            deadkeyMode = true;
            if ('undefined' !== typeof DKT2Combine[code]) {
                chain.push(DKT2Combine[code]);
            } else {
                chain.push(code);
            }
            return make();

        },
        "clear" : function () {
            deadkeyMode = false;
            chain = [];
        }
    };
    return self;
}());